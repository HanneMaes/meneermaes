{% assign dir_segments = page.path | split: '/' %}
{% assign subdirectory = dir_segments[1] %}

<!-- load yaml data -->
{% assign yaml_data = site.data[subdirectory][include.data] %}
{% assign puntenverdeling = yaml_data.punten %}
{% assign doelen = yaml_data.doelen %}

<!-- table -->
<table>

   <!-- header -->
   <thead>
      <tr>
         <th colspan="2">
            <em>{{ yaml_data.title }}</em>
         </th>
      </tr>
   </thead>

   <tbody>
      <!-- punten -->
      {% if puntenverdeling %}
      <tr>
         <td colspan="2"><strong>Puntenverdeling</strong></td>
      </tr>
      {% for row in puntenverdeling %}
      <tr>
         <td>{{ row.desc }}</td>
         <td class="punt">{{ row.max }}</td>
      </tr>
      {% endfor %}

      <!-- Total row -->
      <tr class="puntenTotaal">
         <td>Totaal</td>
         <td class="punt">
            {% assign total_punt = 0 %}
            {% for row in puntenverdeling %}
            {% assign total_punt = total_punt | plus: row.max | plus: 0 %}
            {% endfor %}
            {{ total_punt }}
         </td>
      </tr>
      {% endif %}

      <!-- doelen -->
      {% if doelen %}
      <tr>
         <td colspan="2"><strong>Doelen</strong></td>
      </tr>
      {% for row in doelen %}
      <tr>
         <td><em>{{ row.nr }}</em></td>
         <td>{{ row.desc }}</td>
      </tr>
      {% endfor %}
      {% endif %}
   </tbody>
</table>
