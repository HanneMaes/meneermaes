{% assign dir_segments = page.path | split: '/' %}
{% assign subdirectory = dir_segments[1] %}

<!-- load yaml data -->
{% assign collection = site.data[subdirectory] %}
{% assign yaml_data = collection[include.data] %}
{% assign puntenverdeling = yaml_data.punten %}
{% assign doelen = yaml_data.doelen %}

<!-- punten table -->
{% if puntenverdeling %}
<table>
   <thead>
      <tr>
         <th>
            <em>Puntenverdeling:</em> {{ yaml_data.title }}
         </th>
         <th></th>
      </tr>
   </thead>
   <tbody>
      {% for row in puntenverdeling %}
      <tr>
         <td>{{ row.desc }}</td>
         <td class="punt">{{ row.max }}</td>
      </tr>
      {% endfor %}

      <!-- Total row -->
      <tr class="puntenTotaal">
         <td>Totaal</td>
         <td class="punt">
            {% assign total_punt = 0 %}
            {% for row in puntenverdeling %}
            {% assign total_punt = total_punt | plus: row.max | plus: 0 %}
            {% endfor %}
            {{ total_punt }}
         </td>
      </tr>
   </tbody>
</table>
{% endif %}

<!-- doelen table -->
{% if doelen %}
<table>
   <thead>
      <tr>
         <th></th>
         <th>
            <em>Doelen:</em> {{ yaml_data.title }}
         </th>
      </tr>
   </thead>
   <tbody>
      {% for row in doelen %}
      <tr>
         <td><em>{{ row.nr }}</em></td>
         <td>{{ row.desc }}</td>
      </tr>
      {% endfor %}
   </tbody>
</table>
{% endif %}

<p>DEBUG: {{ page.path }}</p>
<p>DEBUG subdirectory: {{ subdirectory }}</p>
<p>DEBUG title: {{ site.data.universeel.zoekstrategie.title }}</p>
<p>DEBUG doelen count: {{ site.data.universeel.zoekstrategie.doelen | size }}</p>
